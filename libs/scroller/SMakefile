## Scroller-Makefile
##
## Copyright ©1999-2008 pinc Software. All Rights Reserved.
## Licensed under the terms of the MIT License.

.c.o:
# sc $(OPTIMIZE) $(CFLAGS) $(DEBUG) define=CPU_$(CPU) cpu=$(CPU) gst=$(GST) gstimm objname=$*.o $*.c
  sc $(OPTIMIZE) $(CFLAGS) $(DEBUG) define=CPU_$(CPU) cpu=$(CPU) objname=$*.o $*.c

.c.oo:
# sc $(OPTIMIZE) $(CFLAGS) $(DEBUG) define=CPU_$(CPU) cpu=any gst=$(GST) gstimm objname=$*.oo $*.c
  sc $(OPTIMIZE) $(CFLAGS) $(DEBUG) define=CPU_$(CPU) cpu=any objname=$*.oo $*.c

.c.ooo:
# sc $(CFLAGS) $(DEBUG) define=CPU_$(CPU) cpu=$(CPU) gst=$(GST) gstimm objname=$*.ooo $*.c
  sc $(CFLAGS) $(DEBUG) define=CPU_$(CPU) cpu=$(CPU) objname=$*.ooo $*.c

.asm.o:
  asm -D -DCPU_$(CPU) -u $*.asm

#CFLAGS         = streq strmerge nostkchk ign=147 cnest nover memsize=huge utillib
CFLAGS          = streq strmerge nostkchk ign=147 cnest nover memsize=huge
#LFLAGS          = sc sd noicons swidth 22 map ram:test.map x
LFLAGS          = sc sd noicons
#LFLAGS          = sc sd nd noicons

#OPTIMIZE        = optimize nooptinlocal opttime
OPTIMIZE        = noopt
#CPU            = 68030
CPU             = ANY
DEBUG           = debug=line
LIBS            = lib:amiga.lib lib:sc.lib lib:debug.lib
#GST            = include:all.gst

all:              pScroller.gadget

start:            pScroller.gadget
                  copy pScroller.gadget to SYS:Classes/Gadgets QUIET
                  flush >nil:

OBJS            = Scroller_romtag.o Scroller_lib.oo Scroller.o
#                  TE_dispatch.o TE_draw.o TE_clip.o

pScroller.gadget: $(OBJS)
                  slink with t:Scroller.with <<!(t:Scroller.with)
                    from $(OBJS)
                    to $@
                    lib $(LIBS)
                    $(LFLAGS)
                    <

Scroller_romtag.o: Scroller_romtag.asm Scroller_rev.i

